@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    color-scheme: dark;
    --bg-body: #020617;
    --bg-panel: rgba(2, 6, 23, 0.9);
    --bg-panel-strong: rgba(5, 12, 26, 0.9);
    --bg-muted: #050c1a;
    --text-primary: #f8fafc;
    --text-secondary: #cbd5f5;
    --text-muted: #94a3b8;
    --border-color: rgba(148, 163, 184, 0.35);
    --ring-color: rgba(29, 185, 84, 0.4);
  }

  html {
    scroll-behavior: smooth;
    overflow-x: hidden; /* Prevent horizontal scroll at root */
    background-color: var(--bg-body);
  }
  
  body {
    font-family: 'Inter', sans-serif;
    margin: 0;
    padding: 0;
    position: relative;
    color: var(--text-primary);
    overflow-x: hidden; /* Prevent horizontal scroll */
    width: 100%;
    background: linear-gradient(-45deg, #020617, #050c1a, #0f172a, #052e16);
    background-size: 400% 400%;
    animation: gradientShift 15s ease infinite;
  }

  /* Ensure full-width sections work properly */
  * {
    box-sizing: border-box;
  }
  
  /* Skip to content for a11y */
  .skip-to-content {
    position: absolute;
    top: -40px;
    left: 0;
    background: #111827;
    color: white;
    padding: 8px 12px;
    z-index: 1000;
    border-radius: 0 0 8px 0;
  }
  .skip-to-content:focus { top: 0; }

  /* Reduce motion */
  @media (prefers-reduced-motion: reduce) {
    html:focus-within { scroll-behavior: auto; }
    *, *::before, *::after { animation-duration: 0.01ms !important; animation-iteration-count: 1 !important; transition-duration: 0.01ms !important; }
  }

  #root, #__next { overflow-x: hidden; width: 100%; }

  img, svg, video, canvas, iframe { max-width: 100%; height: auto; display: block; }

  section, nav, header, footer, main, .container, .container-custom { overflow-x: hidden; color: var(--text-primary); }

  ::selection {
    background: rgba(29, 185, 84, 0.35);
    color: #f8fafc;
  }

  /* Dark theme overrides for common Tailwind utilities */
  .text-gray-900,
  .text-gray-800 { color: var(--text-primary) !important; }
  .text-gray-700 { color: var(--text-secondary) !important; }
  .text-gray-600 { color: var(--text-muted) !important; }
  .text-gray-500 { color: #7c8ba6 !important; }
  .text-gray-400 { color: #64748b !important; }
  .text-gray-300 { color: #475569 !important; }
  .text-gray-200 { color: #334155 !important; }

  .bg-white,
  .bg-surface,
  .bg-gray-50,
  .bg-gray-100 { background-color: var(--bg-panel-strong) !important; color: var(--text-primary); }

  .bg-white\/95 { background-color: rgba(5, 12, 26, 0.95) !important; }
  .bg-white\/90 { background-color: rgba(5, 12, 26, 0.9) !important; }
  .bg-white\/80 { background-color: rgba(5, 12, 26, 0.8) !important; }
  .bg-white\/70 { background-color: rgba(5, 12, 26, 0.7) !important; }
  .bg-white\/60 { background-color: rgba(5, 12, 26, 0.6) !important; }
  .bg-white\/40 { background-color: rgba(5, 12, 26, 0.4) !important; }
  .bg-white\/30 { background-color: rgba(5, 12, 26, 0.3) !important; }

  .border-gray-100,
  .border-gray-200,
  .border-white\/50 { border-color: var(--border-color) !important; }
  .border-gray-300 { border-color: rgba(148, 163, 184, 0.45) !important; }

  .bg-gray-900 { background-color: #020617 !important; }
  .bg-gray-100\/40,
  .bg-gray-100\/60,
  .bg-gray-100\/70 { background-color: rgba(148, 163, 184, 0.12) !important; }

  .bg-green-50 { background-color: rgba(29, 185, 84, 0.12) !important; }
  .border-green-200 { border-color: rgba(29, 185, 84, 0.35) !important; }
  .text-green-800,
  .text-green-700 { color: #bbf7d0 !important; }

  .bg-blue-50 { background-color: rgba(59, 130, 246, 0.12) !important; }
  .border-blue-200 { border-color: rgba(59, 130, 246, 0.35) !important; }
  .text-blue-800,
  .text-blue-700 { color: #bfdbfe !important; }

  .bg-purple-50 { background-color: rgba(168, 85, 247, 0.12) !important; }
  .border-purple-200 { border-color: rgba(167, 139, 250, 0.4) !important; }
  .text-purple-800,
  .text-purple-700 { color: #ddd6fe !important; }

  .bg-yellow-50 { background-color: rgba(250, 204, 21, 0.12) !important; }
  .border-yellow-200,
  .border-yellow-400 { border-color: rgba(250, 204, 21, 0.45) !important; }
  .text-yellow-800,
  .text-yellow-700 { color: #fef9c3 !important; }
}

@layer components {
  .btn-primary { @apply inline-flex items-center justify-center gap-2 bg-brand text-white font-semibold py-3 px-6 rounded-2xl shadow-sm hover:bg-brand-dark focus:outline-none focus-visible:ring-2 focus-visible:ring-brand/40 transition-colors duration-200; }
  .btn-ghost { @apply inline-flex items-center justify-center gap-2 border border-surface-ring text-ink hover:bg-surface-soft py-3 px-6 rounded-2xl focus:outline-none focus-visible:ring-2 focus-visible:ring-brand/30 transition-colors duration-200; }
  .link-muted { @apply text-ink-muted hover:text-ink; }

  .section-padding { @apply py-16 md:py-24; }
  .container-custom { @apply max-w-7xl mx-auto px-4 sm:px-6 lg:px-8; }
  .text-gradient { @apply bg-gradient-to-r from-trovo-green to-trovo-green-light bg-clip-text text-transparent; }
  .glass-effect { @apply bg-white/10 backdrop-blur-sm border border-white/20 rounded-2xl; }

  /* Existing utilities retained */
  .floating-element { @apply animate-float; }
  .floating-element-delayed { @apply animate-float-delayed; }

  /* Custom scrollbar */
  ::-webkit-scrollbar { width: 8px; }
  ::-webkit-scrollbar-track { background: #f1f1f1; }
  ::-webkit-scrollbar-thumb { background: #1DB954; border-radius: 4px; }
  ::-webkit-scrollbar-thumb:hover { background: #18a147; }

  .backdrop-blur-md { backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px); }

  /* Performance optimizations to prevent layout shifts */
  .hero-section { contain: layout style paint; }
  .phone-showcase { transform: translateZ(0); will-change: opacity; }
  .motion-safe { will-change: transform, opacity; backface-visibility: hidden; }
  
  /* Hero section alignment improvements */
  @media (min-width: 1024px) {
    .hero-content-left { 
      padding-right: 1rem;
      max-width: 36rem; 
    }
    .hero-mockup-right { 
      display: flex;
      justify-content: flex-end;
      align-items: center;
      padding-left: 1rem;
    }
  }

  /* Prevent text animation layout shifts */
  .animated-text-container {
    contain: layout style;
    will-change: auto;
  }
  
  .animated-text-container h1,
  .animated-text-container div {
    transform: translateZ(0);
    backface-visibility: hidden;
  }

  /* Hide scrollbar helper */
  .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
  .no-scrollbar::-webkit-scrollbar { display: none; }

  /* 3D Section Animations */
  @keyframes fade-in-up {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes fade-in-right {
    from {
      opacity: 0;
      transform: translateX(30px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  .animate-fade-in-up {
    animation: fade-in-up 0.8s ease-out forwards;
  }

  .animate-fade-in-right {
    animation: fade-in-right 0.8s ease-out forwards 0.3s;
    opacity: 0;
  }

  @keyframes pulse-slow {
    0%, 100% {
      opacity: 0.45;
      transform: scale(0.95);
    }
    50% {
      opacity: 0.9;
      transform: scale(1.05);
    }
  }

  @keyframes orbit-spin {
    from {
      transform: rotate(0deg);
    }
    to {
      transform: rotate(360deg);
    }
  }

  @keyframes float-soft {
    0%, 100% {
      transform: translateY(0px);
    }
    50% {
      transform: translateY(-6px);
    }
  }

  .animate-pulse-slow {
    animation: pulse-slow 6s ease-in-out infinite;
  }

  .orbit-glow {
    animation: orbit-spin 18s linear infinite;
  }

  .pulse-ring {
    animation: pulse-slow 7s ease-in-out infinite;
  }

  .floating-card {
    animation: float-soft 5s ease-in-out infinite;
  }
}
